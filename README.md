# NiFi Processor for Azure Data Lake

This code implements a processor to store NiFi flowfiles in Azure Data Lake.

## Usage
Copy the [NAR file](/azure-datalake-1.0-SNAPSHOT.nar)
 to NiFi's `lib` folder and restart.  Configuration requires the following parameters from Azure:
* Client Id, Client secret, Subscription Id, and Storage account name from the [Azure portal](https://portal.azure.com).
* Tenant Id from Windows Powershell (type `Login-AzureRmAccount` and login to get this).

The content of the flow file will be written to the path specified in Azure Data Lake, using the filename provided
in the flow file's attribute.  If the file already exists, it can either be overwritten, appended or routed to the
processor's failure output.

This Processor supports chunking, so it works well for very large individual flow files and omits the 28.6MB limit 
enforced by Azure for file creation. 

## To compile
Compile using `mvn clean install`.  It is currently compiled for Java 8.

The component relies on Microsoft's Azure Data Lake Store Java SDK, which is documented
[here](https://azure.microsoft.com/en-gb/documentation/articles/data-lake-store-get-started-java-sdk/) and
[here](https://github.com/Azure/azure-sdk-for-java).